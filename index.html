<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Súng Cối 60mm</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; background: #0b0f0a; color: white; font-family: sans-serif; overflow: hidden; }
        
        /* Tiêu đề linh hoạt */
        .header {
            position: absolute; top: 0; width: 100%; text-align: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent); 
            padding: 10px 0; z-index: 10;
        }
        .header h1 { margin: 0; font-size: 18px; color: #4caf50; letter-spacing: 1px; }

        /* Cấu trúc Sidebars mặc định (Cho máy tính) */
        .sidebar {
            position: absolute; display: flex; flex-direction: column; gap: 10px; z-index: 10;
            top: 50%; transform: translateY(-50%);
        }
        .sidebar-left { left: 15px; }
        .sidebar-right { right: 15px; }

        .btn {
            width: 140px; padding: 12px; cursor: pointer;
            background: rgba(27, 94, 32, 0.85); color: white;
            border: 1px solid #2e7d32; border-radius: 5px;
            font-weight: bold; font-size: 13px; transition: 0.3s;
        }
        .btn-info { background: rgba(1, 87, 155, 0.85); border-color: #0277bd; }

        model-viewer { width: 100vw; height: 100vh; background: #000; }

        /* Hộp thoại thuyết minh */
        #text-box {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 85%; max-height: 30vh; background: rgba(0, 0, 0, 0.9);
            border-top: 3px solid #0277bd; padding: 15px; border-radius: 8px;
            display: none; overflow-y: auto; z-index: 20; font-size: 14px;
        }

        /* --- THIẾT KẾ RIÊNG CHO ĐIỆN THOẠI (Mobile) --- */
        @media (max-width: 768px) {
            .header h1 { font-size: 16px; }

            /* Đưa phím xuống dưới hoặc thu nhỏ lại */
            .sidebar {
                top: auto; transform: none; bottom: 80px; /* Đẩy lên trên text-box một chút */
                flex-direction: row; width: 95%; justify-content: center; left: 2.5%; right: 2.5%;
                flex-wrap: wrap; gap: 5px;
            }
            
            .sidebar-left { bottom: 125px; } /* Cụm chi tiết xếp hàng trên */
            .sidebar-right { bottom: 80px; }  /* Thuyết minh xếp hàng dưới */

            .btn {
                width: 30%; /* Chia 3 nút mỗi hàng */
                padding: 8px 5px;
                font-size: 10px;
                white-space: nowrap; /* Không cho xuống dòng chữ trong nút */
            }
            
            #text-box { width: 90%; bottom: 10px; font-size: 13px; }
        }
    </style>
</head>
<body>

    <div class="header"><h1>SÚNG CỐI 60MM</h1></div>

    <div class="sidebar sidebar-left">
        <button class="btn" onclick="location.href='pages/TayCam.html'">Tay Cầm</button>
        <button class="btn" onclick="location.href='pages/CoCauTam.html'">Cơ Cấu Tầm</button>
        <button class="btn" onclick="location.href='pages/CoCauHuong.html'">Cơ Cấu Hướng</button>
    </div>

    <div class="sidebar sidebar-right">
        <button class="btn btn-info" onclick="toggleText()">Chữ</button>
        <button class="btn btn-info" id="audio-btn" onclick="toggleAudio()">Âm Thanh</button>
    </div>

    <model-viewer src="models/LapGhepTong.glb" camera-controls auto-rotate shadow-intensity="1"></model-viewer>

    <div id="text-box"></div>
    <audio id="myAudio" src="ThuyetMinhAmThanh.mp3"></audio>

    <script>
        function toggleText() {
            const box = document.getElementById('text-box');
            if (box.style.display === 'block') {
                box.style.display = 'none';
            } else {
                fetch('ThuyetMinh.txt').then(res => res.text()).then(data => {
                    box.innerText = data;
                    box.style.display = 'block';
                });
            }
        }

        const audio = document.getElementById('myAudio');
        const audioBtn = document.getElementById('audio-btn');

        function toggleAudio() {
            if (audio.paused) {
                audio.play().catch(() => alert("Lỗi: Kiểm tra lại tên file MP3 hoặc tương tác với màn hình trước khi bấm!"));
                audioBtn.innerText = "Dừng";
                audioBtn.style.background = "#c62828";
            } else {
                audio.pause();
                audioBtn.innerText = "Âm Thanh";
                audioBtn.style.background = "rgba(1, 87, 155, 0.85)";
            }
        }
    </script>
</body>
</html>
